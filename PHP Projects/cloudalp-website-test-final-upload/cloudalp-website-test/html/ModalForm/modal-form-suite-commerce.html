
<link rel="stylesheet" href="html/ModalForm/modalform.css?v=<?php //echo time(); ?>">
<!-- <link rel="stylesheet" href="html/ModalForm/modalform.min.css?v=<?php echo time(); ?>"> -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
  integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer" />
<div class="custom-Modal-application-Data">
  <div class="button-modal">
    <a type="button" class="closebtn custom-a-close-modal" data-dismiss="modal"><i class="fa fa-times"></i></a>
  </div>
  <div class="modal-header">
    <div class="custom-header">
      <div class="h1-cntent-heading" data-action="h1-cntent-heading">
        <h1 data-dynamic="h1">SuiteCommerce Developer</h1>
      </div>
    </div>
  </div>
  <div class="modal-body" data-action="modal-body">
    <form class="modal-form-content" novalidate="novalidate" enctype="multipart/form-data">
      <div class="form-group">
        <label for="exampleInputName">Full Name</label>
        <input type="text" name="fullname" class="form-control" id="exampleInputName"
          placeholder="Enter your name and surname" aria-required="true" aria-invalid="false">
        <span class="ErrorMsg"></span>
      </div>
      <div class="form-group">
        <label for="exampleInputEmail1" required="required">Email address</label>
        <input type="email" name="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"
          placeholder="Enter your email address" aria-required="true" aria-invalid="false">
        <span class="ErrorMsg emailAddress">

        </span>
      </div>
      <div class="form-group">
        <label for="inputAddress">Address</label>
        <input type="text" name="address" class="form-control" id="inputAddress" placeholder="1234 Main St"  aria-required="true" aria-invalid="false">
        <span class="ErrorMsg"></span>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="inputCity">City</label>
          <input type="text" name="city" class="form-control" id="inputCity" placeholder="Istanbul" aria-required="true" aria-invalid="false">
          <span class="ErrorMsg"></span>
        </div>
        <div class="form-group col-md-3">
          <label for="inputZip">Zip</label>
          <input type="text" name="zip" class="form-control" id="inputZip" placeholder="34000" aria-required="true">
          <span class="ErrorMsg"></span>
        </div>
      </div>
      <div class="form-group">
        <label for="example-tel-input" class="col-2 col-form-label">Telephone</label>
        <div class="col-10">
          <input class="form-control " name="tel"
            type="tel" placeholder="1-(555)-555-5555" pattern="\d*" id="example-tel-input" aria-required="true"
            aria-invalid="false">
          <span class="ErrorMsg phoneNumber"></span>
        </div>
      </div>
      <div class="form-group mt-3">
        <label class="mr-4">Upload your CV:</label>
        <input data-action="fileContent" type="file" name="file" accept=".doc,.docx,.pdf" aria-required="true" aria-invalid="false">
      </div>
      <div class="uploadErrorMessage">
        <span class="ErrorMsg uploadCv"></span>
      </div>
      <div class="anchor-tag-for-login text-center button-padding">
        <button type="submit" data-action="cust"
          class="wpcf7-form-control wpcf7-submit btn btn-maincolor btn-short ml-0 mt-18">Send Us</button>
      </div>
    </form>
    <div class="dynamic-message"></div>
  </div>
</div>
<script>
    function isValidEmailAddress(emailAddress) {
    var pattern = new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);
    return pattern.test(emailAddress);
}
   function isvalidphoneNumber(phoneNumber){
       var pattern= new RegExp(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
       return pattern.test(phoneNumber);
   }
  $('.modal-form-content').on('submit', function (e) {
    e.preventDefault();
    var $form = $(this);
    // console.log($($form));
    $($form).find('.contact-form-respond').remove();
    $($form).find('[aria-required="true"]').each(function (index) {
      var $thisRequired = $(this);
      if (!$thisRequired.val().length) {
        $thisRequired
          .addClass('invalid')
          .on('focus', function () {
            $thisRequired
              .removeClass('invalid');
          });
      }
    });
   var emailAddress= $($form).find('[name="email"]').val();
   var phoneNumber=$($form).find('[name="tel"]').val();
   // return;
    if(isValidEmailAddress(emailAddress)){
        $('.emailAddress').html('');
        if(isvalidphoneNumber(phoneNumber)){
            $('.phoneNumber').html(''); 
            if($($form).find('[data-action="fileContent"]').val() !== ''){
                $('.uploadCv').html('');
                if ($form.find('[aria-required="true"]').hasClass('invalid')) {
                  return;
                }
                let formData = new FormData(document.querySelector(".modal-form-content"));
                    jQuery.ajax({
                        url: "uploadDocument.php",
                        type: "POST",
                        data: formData,
                        processData: false,
                        contentType: false,
                        beforeSend: function(){
                           $($form).find('[data-action="cust"]').text('Processing...');
                        },
                        complete:function(){
                           $($form).find('[data-action="cust"]').text('send us');
                        },
                        success: function (data, textStatus, jqXHR) {
                            //cleaning form
                            $($form).hide();
                            $('[data-action="modal-body"]').find('.dynamic-message').html('<div class="contact-form-respond color-main mt-20">' + data + '</div>');
                          $('[data-action="h1-cntent-heading"]').find('[data-dynamic="h1"]').html('<i style="color:var(--color211);" class="fa fa-check-circle"></i> Thank You')
                            var $formErrors = $form.find('.form-errors');
                            if (!$formErrors.length) {
                                $form[0].reset();
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            //if fails 
                            // $($form).find('[data-action="cust"]').attr('disabled', false).blur().parent().append('<div class="contact-form-respond color-main mt-20">Mail cannot be sent. You need PHP server to send mail.</div>');
                            $('[data-action="modal-body"]').find('.dynamic-message').html('<div class="contact-form-respond color-main mt-20">Mail cannot be sent. You need PHP server to send mail.</div>');
                        }
                    });

            }else{
                $('.uploadCv').html('Upload Your Cv is Mandatory');
            }
        }else{
            $('.phoneNumber').html('Please Enter Valid Phone Number'); 
        }
    }else{
        $('.emailAddress').html('Please Enter Valid Email Address');
    }
    // Use like this

  });

</script>